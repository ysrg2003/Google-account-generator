name: Enterprise Web Automation Engine

on:
  workflow_dispatch: # ุชุดุบูู ูุฏูู ููุชุญูู ุงููุทูู

jobs:
  run-core:
    runs-on: ubuntu-latest
    timeout-minutes: 25

    steps:
      - name: ๐ฅ ุณุญุจ ุงูููุฏ ุงููุตุฏุฑู (Checkout)
        uses: actions/checkout@v4

      - name: ๐ ุฅุนุฏุงุฏ ุจุงูุซูู 3.11 (Python Setup)
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'

      - name: ๐๏ธ ุจูุงุก ุงูุจูุฆุฉ ุงููุนุฒููุฉ ูุชุซุจูุช ุงููุญุฑู
        run: |
          # 1. ุฅูุดุงุก ุจูุฆุฉ ุงูุชุฑุงุถูุฉ ูููุน ุชุฏุงุฎู ุงูููุชุจุงุช ูุน ูุธุงู ุงูุชุดุบูู
          python -m venv venv
          
          # 2. ุชูุดูุท ุงูุจูุฆุฉ ูุชุญุฏูุซ ุฃุฏูุงุช ุงูุชุซุจูุช ุงูุฃุณุงุณูุฉ
          source venv/bin/activate
          python -m pip install --upgrade pip setuptools wheel
          
          # 3. ุชุซุจูุช ุงูููุชุจุงุช
          pip install faker camoufox[nimbus] playwright
          
          # 4. ุชุซุจูุช ูุชุตูุญ Firefox ูุงุนุชูุงุฏุงุช ุงููุธุงู (ูุฐุง ุงูุฃูุฑ ูุบูู ุนู ุงุณุชุฎุฏุงู sudo ุจุดูู ูุฏูู)
          python -m playwright install firefox --with-deps

      - name: ๐ ุชุดุบูู ุงููุญุฑู (Deep Execution)
        run: |
          # ุชูุดูุท ุงูุจูุฆุฉ ูุจู ุงูุชุดุบูู ูุถูุงู ุฑุคูุฉ ููุชุจุฉ Playwright ู Camoufox
          source venv/bin/activate
          
          # ุชุดุบูู ุงูุณูุฑุจุช ุงูุฑุฆูุณู ูุน ุถูุงู ุชุฏูู ุงูุณุฌูุงุช ููุฑุงู
          python main.py
        env:
          PYTHONUNBUFFERED: 1

      - name: ๐ ุชุตุฏูุฑ ุงูุญุฒูุฉ ุงูุชูุซูููุฉ (Full Forensic Report)
        if: always() 
        uses: actions/upload-artifact@v4
        with:
          name: Full-Trace-Report-Run-${{ github.run_number }}
          path: |
            ULTIMATE_ENGINE_*
            *.json
            *.log
          retention-days: 14

