name: Ultimate Web Automation Engine

on:
  workflow_dispatch:

jobs:
  run-core:
    runs-on: ubuntu-latest
    timeout-minutes: 25

    steps:
      - name: ğŸ“¥ Checkout Code
        uses: actions/checkout@v4

      - name: ğŸ Setup Python 3.11
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'
          cache: 'pip'

      - name: ğŸ› ï¸ Install Dependencies (Force Path)
        run: |
          python -m pip install --upgrade pip
          pip install faker camoufox[nimbus] playwright
          python -m playwright install firefox --with-deps
          sudo python -m playwright install-deps firefox

      - name: ğŸš€ Run Engine (Deep Execution)
        run: |
          # Ù†Ø³ØªØ®Ø¯Ù… python -m Ù„Ø¶Ù…Ø§Ù† Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¨ÙŠØ¦Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©
          python main.py
        env:
          PYTHONUNBUFFERED: 1

      - name: ğŸ“Š Upload Full Evidence Artifact
        if: always()
        uses: actions/upload-artifact@v4
        with:
          name: Full-Blackbox-Report-${{ github.run_number }}
          path: |
            PRO_ENGINE_*
            *.json
          retention-days: 14
